(function(){var t,r,e,i,o,n,s,h,u,a,l;e=Matter.Engine,s=Matter.World,t=Matter.Bodies,i=Matter.Events,r=Matter.Body,Math.clamp=function(t,r,e){return Math.max(r,Math.min(e,t))},n=function(){function t(t,r,e,i){this.k_p=null!=t?t:0,this.k_i=null!=r?r:0,this.k_d=null!=e?e:0,this.sampleTime=null!=i?i:20,this.error=0,this.lastError=0,this.sumError=0,this.target=0,this.gettter=function(){return 0},this.setter=function(){return 0},this.k_motor=.1}return t.prototype.step=function(){return this.lastError=this.error,this.error=this.target-this.getter(),this.sumError+=this.error,this.out=this.k_motor*Math.clamp(this.k_p*this.error+this.k_i*this.sumError+this.k_d*this.lastError,-1,1),this.setter(this.out)},t.prototype.setTarget=function(t){return this.target=t,this.error=0,this.lastError=0,this.sumError=0},t.prototype.setK_p=function(t){return this.k_p=t},t.prototype.setK_i=function(t){return this.k_i=t*(this.sampleTime/1e3)},t.prototype.setK_d=function(t){return this.k_d=t/(this.sampleTime/1e3)},t}(),window.PID=o=new n(.001,0,.001),o.setTarget(300),o.getter=function(){return function(){return boxA.position.y}}(this),o.setter=function(){return function(t){return r.applyForce(boxA,boxA.position,{x:0,y:t})}}(this),h=document.getElementById("elevatorGraphic"),l={positionIterations:6,velocityIterations:4,enableSleeping:!1},window.engine=u=e.create(h,l),window.boxA=t.rectangle(400,200,80,80),boxA.mass=20,a=t.rectangle(400,610,810,60,{isStatic:!0}),s.add(u.world,[boxA,a]),e.run(u),window.controlLoop=window.setInterval(function(){return o.step()},o.sampleTime)}).call(this);